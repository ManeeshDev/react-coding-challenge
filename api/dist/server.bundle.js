(()=>{var e={299:(e,t,s)=>{s(656).config(),e.exports={HOST:process.env.DB_HOST,USER:process.env.DB_USER,PASSWORD:process.env.DB_PASS,DB:process.env.DB_NAME,dialect:process.env.DIALECT,pool:{max:5,min:0,acquire:3e4,idle:1e4}}},395:(e,t,s)=>{const n=s(591).involvedSector;t.findAll=(e,t)=>{n.findAll().then((e=>{t.send({success:!0,data:e,message:"Involved Sectors successfully fetched."})})).catch((e=>t.status(500).send({success:!1,data:null,message:e.message||"Some error occurred while retrieving sectors."})))},t.findOne=(e,t)=>{const s=e.params.id;n.findByPk(s).then((e=>{if(!e)return t.status(404).send({success:!1,data:null,message:`Cannot find Involved Sector with id=${s}.`});t.send({success:!0,data:e,message:"Involved Sector successfully fetched."})})).catch((e=>t.status(500).send({success:!1,data:null,message:e.message||"Error retrieving Involved Sector with id="+s})))},t.createInvolvedSectors=(e,t)=>{const s=e.body.id,i=e.body.name,a=e.body.sectors,o=e.body.agreeToTerms;if(!i)return t.status(400).send({success:!1,data:null,message:"Name can not be empty!"});if(!a||a.length<=0)return t.status(400).send({success:!1,data:null,message:"Sectors can not be empty!"});if(!o)return t.status(400).send({success:!1,data:null,message:"Agreed To Terms can not be empty!"});const r={name:i,sectors:"["+a.toString()+"]",isAgreedToTerms:o};if(s&&""!==s){let e;n.update(r,{where:{id:s}}).then((async i=>1===i||i.length>0&&1===i[0]?(await n.findByPk(s).then((t=>{e=t})).catch((t=>{e=null})),t.send({success:!0,data:e,message:"Involved Sector was updated successfully."})):t.send({success:!1,data:i,message:`Cannot update Involved Sector with id=${s}. Maybe Involved Sector was not found or request is empty!`}))).catch((e=>t.status(500).send({success:!1,data:null,message:e.message||"Error updating Involved Sectors with id="+s})))}else n.create(r).then((e=>t.send({success:!0,data:e,message:"Involved Sector successfully created."}))).catch((e=>t.status(500).send({success:!1,data:null,message:e.message||"Some error occurred while creating the InvolvedSectors."})))}},677:(e,t,s)=>{const n=s(591).sectors;t.findAll=(e,t)=>{n.findAll().then((e=>{t.send({success:!0,data:e,message:"Sectors successfully fetched."})})).catch((e=>t.status(500).send({success:!1,data:null,message:e.message||"Some error occurred while retrieving sectors."})))}},977:(e,t,s)=>{const n=s(591).users,i=s(432);t.create=(e,t)=>{const s=e.body.email,a=e.body.password;return s?a?function(e){return new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(String(e).toLowerCase())}(s)?function(e){const t=e!==e.replace(/\[|\]/g,"").replace(/\\|\//g,""),s=e.match(/[~/`%^*:;"'<>?,-.|_=+(){}]+/)&&!t,n=e.toString().length>=6,i=e.match(/\d/);return!!(s&&n&&i)}(a)?void n.findOne({where:{email:s}}).then((o=>{if(o)return t.status(400).send({message:"Failed! Username is already in use!"});{const o={email:s,password:i.hashSync(a,8),isAdmin:!!e.body.isAdmin&&e.body.isAdmin,first_name:e.body.first_name,last_name:e.body.last_name,mobile:e.body.mobile,birthday:e.body.birthday,gender:e.body.gender,profession:e.body.profession};n.create(o).then((e=>t.send(e))).catch((e=>t.status(500).send({message:e.message||"Some error occurred while creating the User."})))}})):t.status(400).send({message:"This password is not valid password!"}):t.status(400).send({message:"This email is not valid email address!"}):t.status(400).send({message:"Password can not be empty!"}):t.status(400).send({message:"Email can not be empty!"})},t.findOne=(e,t)=>{const s=e.params.id;n.findByPk(s).then((e=>e?t.send(e):t.status(404).send({message:`Cannot find User with id=${s}.`}))).catch((e=>t.status(500).send({message:"Error retrieving User with id="+s})))}},591:(e,t,s)=>{const n=s(299),i=s(496),a=new i(n.DB,n.USER,n.PASSWORD,{host:n.HOST,dialect:n.dialect,operatorsAliases:!1,pool:{max:n.pool.max,min:n.pool.min,acquire:n.pool.acquire,idle:n.pool.idle}}),o={};o.Sequelize=i,o.sequelize=a,o.users=s(271)(a,i),o.sectors=s(392)(a,i),o.involvedSector=s(174)(a,i),e.exports=o},174:e=>{e.exports=(e,t)=>e.define("involved_sector",{name:{type:t.STRING},sectors:{type:t.STRING},isAgreedToTerms:{type:t.INTEGER}})},392:e=>{e.exports=(e,t)=>{const s=e.define("sector",{title:{type:t.STRING},value:{type:t.STRING}});return(async()=>{await s.sync();const{count:e,rows:t}=await s.findAndCountAll();0===e&&0===t.length&&(console.log("===================================Sector bulkCreate======================"),s.bulkCreate([{title:"Manufacturing",value:"1"},{title:"Construction materials",value:"19"},{title:"Electronics and Optics",value:"18"},{title:"Food and Beverage",value:"6"},{title:"Bakery & confectionery products",value:"342"},{title:"Beverages",value:"43"},{title:"Fish & fish products",value:"42"},{title:"Meat & meat products",value:"40"},{title:"Milk & dairy products",value:"39"},{title:"Otherrr",value:"437"},{title:"Sweets & snack food",value:"378"},{title:"Furniture",value:"13"},{title:"Bathroom/sauna",value:"389"},{title:"Bedroom",value:"385"},{title:"Children room",value:"390"},{title:"Kitchen",value:"98"},{title:"Living room",value:"101"},{title:"Office",value:"392"},{title:"Other (Furniture)",value:"394"},{title:"Outdoor",value:"341"},{title:"Project furniture",value:"99"},{title:"Machinery",value:"12"},{title:"Machinery components",value:"94"},{title:"Machinery equipment/tools",value:"91"},{title:"Manufacture of machinery",value:"224"},{title:"Maritime",value:"97"},{title:"Aluminium and steel workboats",value:"271"},{title:"Boat/Yacht building",value:"269"},{title:"Ship repair and conversion",value:"230"},{title:"Metal structures",value:"93"},{title:"Otherr",value:"508"},{title:"Repair and maintenance service",value:"227"},{title:"Metalworking",value:"11"},{title:"Construction of metal structures",value:"67"},{title:"Houses and buildings",value:"263"},{title:"Metal products",value:"267"},{title:"Metal works",value:"542"},{title:"CNC-machining",value:"75"},{title:"Forgings Fasteners",value:"62"},{title:"Gas Plasma Laser cutting",value:"69"},{title:"MIG TIG Aluminum welding",value:"66"},{title:"Plastic and Rubber",value:"9"},{title:"Packaging",value:"54"},{title:"Plastic goods",value:"556"},{title:"Plastic processing technology",value:"559"},{title:"Blowing",value:"55"},{title:"Moulding",value:"57"},{title:"Plastics welding and processing",value:"53"},{title:"Plastic profiles",value:"560"},{title:"Printing",value:"5"},{title:"Advertising",value:"148"},{title:"Book/Periodicals printing",value:"150"},{title:"Labelling and packaging printing",value:"145"},{title:"Textile and Clothing",value:"7"},{title:"Clothing",value:"44"},{title:"Textile",value:"45"},{title:"Wood",value:"8"},{title:"Other (Wood)",value:"337"},{title:"Wooden building materials",value:"51"},{title:"Wooden houses",value:"47"},{title:"Other",value:"3"},{title:"Creative industries",value:"37"},{title:"Energy technology",value:"29"},{title:"Environment",value:"33"},{title:"Service",value:"2"},{title:"Business services",value:"25"},{title:"Engineering",value:"35"},{title:"Information Technology and Telecommunications",value:"28"},{title:"Data processing Web portals E-marketing",value:"581"},{title:"Programming Consultancy",value:"576"},{title:"Software Hardware",value:"121"},{title:"Telecommunications",value:"122"},{title:"Tourism",value:"22"},{title:"Translation services",value:"141"},{title:"Transport and Logistics",value:"21"},{title:"Air",value:"110"},{title:"Rail",value:"114"},{title:"Road",value:"112"},{title:"Water",value:"113"}]).then((()=>{console.log("Sector bulkCreate done.."),console.log("===================================Sector bulkCreate======================")})))})(),s}},271:e=>{e.exports=(e,t)=>e.define("user",{email:{type:t.STRING},password:{type:t.STRING}})},466:(e,t,s)=>{e.exports=e=>{const t=s(860).Router(),n=s(677),i=s(395);t.get("/sectors",n.findAll),t.get("/all-involved-sectors",i.findAll),t.get("/involved-sector-by/:id",i.findOne),t.post("/involved-sectors",i.createInvolvedSectors),e.use("/api/public",t)}},401:(e,t,s)=>{e.exports=e=>{const t=s(977),n=s(860).Router();n.post("/",t.create),n.get("/:id",t.findOne),e.use("/api/user",n)}},656:(e,t,s)=>{const n=s(147),i=s(17),a=s(37),o=s(56).version,r=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function l(e){console.log(`[dotenv@${o}][DEBUG] ${e}`)}const c={config:function(e){let t=i.resolve(process.cwd(),".env"),s="utf8";const o=Boolean(e&&e.debug),r=Boolean(e&&e.override);var u;e&&(null!=e.path&&(t="~"===(u=e.path)[0]?i.join(a.homedir(),u.slice(1)):u),null!=e.encoding&&(s=e.encoding));try{const e=c.parse(n.readFileSync(t,{encoding:s}));return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?(!0===r&&(process.env[t]=e[t]),o&&l(!0===r?`"${t}" is already defined in \`process.env\` and WAS overwritten`:`"${t}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[t]=e[t]})),{parsed:e}}catch(e){return o&&l(`Failed to load ${t} ${e.message}`),{error:e}}},parse:function(e){const t={};let s,n=e.toString();for(n=n.replace(/\r\n?/gm,"\n");null!=(s=r.exec(n));){const e=s[1];let n=s[2]||"";n=n.trim();const i=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===i&&(n=n.replace(/\\n/g,"\n"),n=n.replace(/\\r/g,"\r")),t[e]=n}return t}};e.exports.config=c.config,e.exports.parse=c.parse,e.exports=c},432:e=>{"use strict";e.exports=require("bcryptjs")},582:e=>{"use strict";e.exports=require("cors")},860:e=>{"use strict";e.exports=require("express")},496:e=>{"use strict";e.exports=require("sequelize")},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},56:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.0.3","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"require":"./lib/main.js","types":"./lib/main.d.ts","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@types/node":"^17.0.9","decache":"^4.6.1","dtslint":"^3.7.0","sinon":"^12.0.1","standard":"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2","tap":"^15.1.6","tar":"^6.1.11","typescript":"^4.5.4"},"engines":{"node":">=12"}}')}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}(()=>{const e=s(860),t=s(582);s(656).config();const n=e();n.use(t({origin:"http://localhost:3000"})),n.use(e.json()),n.use(e.urlencoded({extended:!0})),s(591).sequelize.sync(),n.get("/",((e,t)=>{t.json({message:"Welcome to Stack application.  >> REACT CODING CHALLENGE API :)"})})),s(401)(n),s(466)(n);const i=process.env.PORT||8080;n.listen(i,(()=>{console.log("***********************************************"),console.log(`Server is running on port ${i}.`),console.log("***********************************************")}))})()})();
//# sourceMappingURL=server.bundle.js.map